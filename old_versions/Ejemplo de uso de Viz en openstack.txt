function displayViz() {
        var div = $('#dashboard_viz');
        div.empty();			// 1
        var ds_div = null;
        // var ds_div = div.data('ds');
        var start = null;
        var end = null;
        
        var metrics_selected = {};
        $.each(getAllMetrics(), function(ds, ds_metrics) {				// 2
            metrics_selected[ds] = getValuesForm('form_dashboard_metrics_'+ds); 
        });
        var projects = getValuesForm('form_dashboard_projects');
        var companies = getValuesForm('form_dashboard_companies');
        var year = getValuesForm('form_dashboard_year').pop();
        var release = getValuesForm('form_dashboard_releases').pop();
        if (year === "") year = undefined;
        else {
            year = parseInt(year);
            // Old ids format in JSON using months
            //start = year*12;
            // New format: days since 1970-01-01
            // start = (new Date(year.toString()).getTime())/(1000*60*60*24);
            // end = (new Date((year+1).toString()).getTime())/(1000*60*60*24);
            // New format: seconds since 1970-01-01
            start = (new Date(year.toString()).getTime())/1000;
            end = (new Date((year+1).toString()).getTime())/1000;
        }
        if (release === "") release = undefined;
        else {
            var aux = release.split("_");
            start = parseInt(aux[0]);
            end = parseInt(aux[1]);
        }
        
        var config_metric = {show_desc: false, show_title: true, // 3
                show_legend: true, help: false};  
        $.each(Report.getDataSources(), function(index, ds) {
            if (ds_div && ds_div !== ds.getName()) return;
            var metrics = metrics_selected[ds.getName()];
            $.each(metrics, function(index, metric) {		// 4
                if (!(metric in ds.getData()))  return;
                var metric_div = "dashboard_"+ds.getName()+"_"+metric;
                var new_div = "<div class='dashboard_graph' id='";
                new_div += metric_div+"'></div>";
                div.append(new_div);
                if (projects.length>0)
                    ds.displayBasicMetricMyRepos(projects, metric, metric_div, 
                        config_metric, start, end);
                else if (companies.length>0)
                    ds.displayBasicMetricMyCompanies(companies, metric, 
                            metric_div, config_metric, start, end);
                else {
                    config_metric.show_title = false;
                    var data = ds.getData();
                    if (year || release) data = DataProcess.filterDates(start, end, data);
                    Viz.displayBasicMetricsHTML([metric], data, 
                            metric_div, config_metric);
                }
            });
        });
    }



1. Div content is cleared to add new graphs.
2. Draw info parameters are selected (companies, projects, period, year, release...)
3. Draw config parameters are selected (title, legend...)
4. Draw all set of projects / companies, as a function of the metric.